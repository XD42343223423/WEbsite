<!DOCTYPE html>
<html>
<head>
  <title>Image Uploader</title>
</head>
<body style="background:#111;color:white;text-align:center;padding:40px;font-family:sans-serif">
  <h1>Upload Image</h1>
  <input type="file" id="fileInput"><br><br>
  <button onclick="upload()">Upload</button>
  <p id="link" style="margin-top:20px;"></p>

  <script>
    async function upload() {
      const fileInput = document.getElementById("fileInput");
      const file = fileInput.files[0];
      if (!file) return alert("Pick a file");

      const formData = new FormData();
      formData.append("file", file);

      try {
        const res = await fetch("/api/upload", {
          method: "POST",
          body: formData,
        });

        if (!res.ok) throw new Error(await res.text());
        const data = await res.json();

        console.log("[✓] Uploaded URL:", data.url);

        document.getElementById("link").innerHTML = `
          ✅ Uploaded: <a href="${data.url}" target="_blank" style="color:lightgreen;">${data.url}</a><br>
          <img src="${data.url}" alt="Uploaded Image" style="max-width:400px;margin-top:10px;border:2px solid #444;">
        `;

        fileInput.value = ""; // Clear file input after upload
      } catch (err) {
        alert("Upload failed.");
        console.error(err);
      }
    }
  </script>
</body>
</html>
