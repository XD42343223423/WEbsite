<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>In-Memory Image Links</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.2rem;
      background: #f0f0f0;
    }

    input[type="file"] {
      padding: 1rem;
      border-radius: 8px;
    }

    .image-container {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
    }

    img {
      max-width: 300px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .link {
      word-break: break-all;
      background: #eee;
      padding: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <h2>Select Image</h2>
  <input type="file" id="imageInput" accept="image/*" />
  <div id="gallery"></div>

  <script>
    const imageInput = document.getElementById("imageInput");
    const gallery = document.getElementById("gallery");

    function saveLinks(links) {
      localStorage.setItem("image_links", JSON.stringify(links));
    }

    function loadLinks() {
      return JSON.parse(localStorage.getItem("image_links") || "[]");
    }

    function displayImage(url) {
      const container = document.createElement("div");
      container.className = "image-container";

      const img = document.createElement("img");
      img.src = url;

      const link = document.createElement("div");
      link.className = "link";
      link.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;

      container.appendChild(img);
      container.appendChild(link);
      gallery.appendChild(container);
    }

    imageInput.addEventListener("change", () => {
      const file = imageInput.files[0];
      if (file) {
        const blobURL = URL.createObjectURL(file);
        const links = loadLinks();
        links.push(blobURL);
        saveLinks(links);
        displayImage(blobURL);
      }
    });

    // On page load, restore all previous blob links
    window.addEventListener("DOMContentLoaded", () => {
      const links = loadLinks();
      links.forEach(url => displayImage(url));
    });
  </script>

</body>
</html>
