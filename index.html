<!DOCTYPE html>
<html>
<head>
  <title>Image Uploader</title>
</head>
<body style="background:#111;color:white;text-align:center;padding:40px;font-family:sans-serif">
  <h1>Upload Image</h1>
  <input type="file" id="fileInput"><br><br>
  <button onclick="upload()">Upload</button>
  <p id="link" style="margin-top:20px;"></p>

  <script>
    async function upload() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) return alert("Pick a file");

      const formData = new FormData();
      formData.append("file", file);

      try {
        const res = await fetch("/api/upload", {
          method: "POST",
          body: formData,
        });

        if (!res.ok) {
          const errorText = await res.text();
          throw new Error(errorText);
        }

        const data = await res.json();
        const link = document.getElementById("link");
        link.innerHTML = `
          âœ… Uploaded: <a href="${data.url}" target="_blank" style="color:lightgreen;">${data.url}</a><br>
          <img src="${data.url}" alt="Uploaded Image" style="max-width:400px;margin-top:10px;">
        `;
      } catch (err) {
        alert("Upload failed.");
        console.error(err);
      }
    }
  </script>
</body>
</html>
